- var disableBackLink = false

- if ('index' == req.greppy.route.action && 'undefined' !== typeof {{{name}}})
  - disableBackLink = true

- if (!disableBackLink)

  a.btn(onclick="history.back();", title="Back")
    i.icon-arrow-left

  &nbsp;
  a.btn.btn-primary(href="/{{{namePlural}}}/new", title="Create a new {{{name}}}")
    i.icon-plus

- if ('show' == req.greppy.route.action || 'index' == req.greppy.route.action)

  - if ('undefined' !== typeof {{{name}}})

    - if ('show' != req.greppy.route.action)

      &nbsp;
      a.btn.btn-default(href="/{{{namePlural}}}/#{ {{{name}}}.id }", title="Show {{{name}}} details")
        i.icon-search

    &nbsp;
    a.btn.btn-warning(href="/{{{namePlural}}}/#{ {{{name}}}.id }/edit", title="Edit this {{{name}}}")
      i.icon-pencil

    &nbsp;

    {{#softDeletion}}
    - if (!{{{name}}}.deleted_at)

      a.btn.btn-danger.delete(title="Delete", data-id="#{ {{{name}}}.id }")
        i.icon-trash

    - else

      a.btn.btn-success.restore(title="Restore", data-id="#{ {{{name}}}.id }")
        i.icon-refresh
    {{/softDeletion}}
    {{^softDeletion}}
    a.btn.btn-danger.delete(title="Delete", data-id="#{ {{{name}}}.id }")
      i.icon-trash
    {{/softDeletion}}

script.

  /**
   * Delete popup bindings
   */
  $(document).on('click', '.datagrid .delete', function() {

    var id = $(this).attr('data-id');
    greppy.app.dialog(
      'Do you really want to delete this {{{name}}}?',
      {
        ok: function(callback) {

          $.ajax({
              type: "DELETE",
              url: "/{{{namePlural}}}/" + id
          }).done(function(data) {
              window.location.reload();
          });

          callback && callback();
        }
      }
    );
  });
  {{#softDeletion}}

  /**
   * Restore popup bindings
   */
  $(document).on('click', '.datagrid .restore', function() {

    var id = $(this).attr('data-id');
    greppy.app.dialog(
      'Do you really want to restore this {{{name}}}?',
      {
        ok: function(callback) {

          $.ajax({
              type: "POST",
              url: "/{{{namePlural}}}/" + id + '/restore'
          }).done(function(data) {
              window.location.reload();
          });

          callback && callback();
        }
      }
    );
  });
  {{/softDeletion}}

